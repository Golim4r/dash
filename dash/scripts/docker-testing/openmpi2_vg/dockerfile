# Dockerfile for the DASH project
FROM          dashproject/ci:openmpi2

MAINTAINER    The DASH Team <team@dash-project.org>

# Build valgrind from source

# Prepare env
ENV           PAPI_BASE=/opt/papi
ENV           LD_LIBRARY_PATH=${LD_LIBRARY_PATH}:${PAPI_BASE}/lib:/opt/openmpi/lib
ENV           PATH=${PATH}:/opt/openmpi/bin
ENV           MPI_EXEC_FLAGS='--allow-run-as-root --map-by core'
ENV           VERBOSE_CI='true'
ENV           EXEC_WRAP="valgrind --track-origins=yes --leak-check=full"

# Set workdir to dash home
WORKDIR       /opt/dash
